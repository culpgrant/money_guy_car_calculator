name: CI Pipeline

on:
    pull_request:
      branches:
        - main
    workflow_dispatch:
      inputs:
        logLevel:
          description: 'Log level'
          required: true
          default: 'warning'
          type: choice
          options:
          - info
          - warning
          - debug
        tags:
          description: 'Test scenario tags'
          required: false
          type: boolean

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Repo
              uses: actions/checkout@v3
            - name: Setup Python
              uses: actions/setup-python@v4
              with:
                python-version: '3.10'
                cache: 'pip'
            - name: Install python dependencies
              run: python -m pip install --upgrade pip pytest
            - name: Run Pre-commit Hooks
              uses: pre-commit/action@v3.0.0
            - name: Test with pytest
              run: |
                pytest
